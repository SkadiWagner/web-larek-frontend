# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Документация

## Общие типы

```TypeScript 

// Тип с категориями товаров.
type TCategory = "софт-скилл" | "другое" | "дополнительное" | "кнопка" | "хард-скилл";

// Тип с методами оплаты.
type TPayment = "онлайн" | "при получении"; 

```

## Слой Model

```TypeScript 

// Сущность продукта ProductItem, содержит в себе данные конкретного товара(ID, описание товара, изображение, название, категорию, стоимость). Имплементирует интерфейс IProductItem. 
interface IProductItem {
    id: string; // id 
    description: string; // описание 
    image: string; // изображение 
    title: string; // название
    category: TCategory; // категория
    price: number; // цена
}

// Сущность ProductList списка продуктов, содержит в себе массив продуктов. Имплементирует интерфейс IProductList. 
interface IProductList {
    items: IProductItem[]; // массив продуктов
}

// Сущность заказа Order, хранит в себе такие данные как ( способ оплаты, контактная почта, телефон, адресс ). Имплементирует интерфейс IOrder. 
interface IOrder {
    payment: TPayment; // способ оплаты
    email: string; // контактная почта
    phone: string; // контактный телефон
    address: string; // адресс доставки 
    total: number; // итоговая стоимость
    items: string[]; // товары в корзине

}

// Сущность корзины Cart, содержит массив товаров добавленных в корзину, а также итоговую стоимость. Имеет 2 метода(добавление/удаление товара). Имплементирует интерфейс ICart.
interface ICart {
    items: IProductItem[]; // массив товаров в корзине
    totalPrice: number; // итоговая стоимость

    addProduct(productId: string): void; // метод добавления товаров в корзину
	removeProduct(productId: string): void // метод удаления товара
	createOrder(): void 
}
```

## Слой View
```TypeScript 

// Абстрактный компонент, позволяющий разбить интерфейс на независимые части, с которыми можно по отдельности работать и переиспользовать. 
// T - это дженерик-тип, представляющий собой DTO для отображения данных компонента.
abstract interface IComponent<T> {
    hide(element: HTMLElement): void; // Скрывает указанный элемент интерфейса.
    show(element: HTMLElement): void; // Отображает указанный элемент интерфейса.
    setText(element: HTMLElement, value: string): void; //  Устанавливает текстовое содержимое элемента.
    switchEnableState(element: HTMLElement, state: boolean): void; // Изменяет доступность элемента. 
    setImage(el: HTMLImageElement, src: string, alt?: string): void;  // Устанавливает изображение элементу.
    render(data?: Partial<T>): HTMLElement; // Абстрактный метод для отрисовки компонента на основе данных типа T.
  }


 // Класс PageView Главная страница с каталогом товаров, содержит счетчик товаров в корзине, а также список всех товаров.  Имплементирует интерфейс IPageView.
interface IPageView {
	cartCounter: number; // Счетчик товаров в корзине
	productList: HTMLElement[]; // Список продуктов на странице
} 

// Класс CardView Компонент карточки продукта, содержит опциональные поля. Используется в различных компонентах (корзине, галереии, в каталоге на главной странице). Имплементирует интерфейс ICardView.
interface ICardView {
	title: HTMLHeadingElement; // Заголовок продукта
	price: HTMLSpanElement; // Цена продукта 
	button: HTMLButtonElement; // Кнопка
	category?: HTMLSpanElement; // Категория продукта (необязательно)
    description?: HTMLParagraphElement; // Описание продукта (необязательно)
    image?: HTMLImageElement; // Изображение продукта (необязательно)
}

// Класс CartView Компонент корзины, содержащий список продуктов, добавленных в корзину, а также итоговую стоимость. Имеется кнопка для перехода к оформлению заказа. Имплементирует интерфейс ICartView.
interface ICartView {
	productList: HTMLElement[]; // Список продуктов в корзине
	totalPrice: number; // Итоговая стоимость корзины
} 

// Класс ModalView Компонент модального окна, имеет 2 метода Открытие и Закрытие. В качестве дженерика принимает контент для отображения. Имплементирует интерфейс IModalView.
interface IModalView extends IComponent<IModalContent> {
	open(): void; // метод открытия модального окна
    close(): void; // метод закрытия модального окна
}

// Класс ModalContent содержит контент для модального окна. Имплементирует интерфейс IModalContent.
interface IModalContent {
    content: HTMLElement; // Содержимое модального окна
}

// Класс IFormView универсальногого компонента формы. С ее помощью можно будет настроить валидацию всех форм в проекте. Имплементирует интерфейс IFormView.
interface IFormView {
	isValid: boolean; // проверка валидности формы
}

// Класс FormDeliveryView Валидируемой формы, которая содержит 2 обязательных поля: способ оплаты и адресс. Имплементирует интерфейс IFormDeliveryView.
interface IFormDeliveryView {
	payment: TPayment; // Метод оплаты
	address: string; // Адрес доставки
}

// Класс FormContactsView Валидируемой формы, которая содержит 2 обязательных поля: контактная почта и номер телефона. Имплементирует интерфейс IFormContactsView.
interface IFormContactsView {
	email: string; // Email адрес
	phone: string; // Контактный телефон
}

// Класс SuccessfulOrderView модального окна с информацией о успешном оформлении заказа. Отображает списанную сумму. При закрытии данного модального окна происходит очистка корзины. 
// Имплементирует интерфейс ISuccessfulOrderView.
interface ISuccessfulOrderView {
	totalAmount: number; // Итоговая сумма заказа
}
```

## Слой Presenter 

```TypeScript 
// Класс Events помогает раболтать с такиим событями как: подписка на событие, отправление данных, генерациях новых событий с  контекстом. Имплементирует интерфейс IEvents.
interface IEvents {
    on<T>(event: string, callback: (data: T) => void): void; // Подписаться на событие
    emit<T>(event: string, data?: T): void; // Отправить событие с данными
    trigger<T>(event: string, context?: Partial<T>): (data: T) => void; // Сгенерировать событие с контекстом
}

// Класс ApiClient для работы с апи, позволяет получить список продуктов, продукт по ID, создать сущносость заказа. Имплементирует интерфейс IApiClient.
interface IApiClient {
    getProducts(): Promise<IProductItem[]>; // Получить список продуктов
    getProduct(id: string): Promise<IProductItem>; // Получить информацию о продукте по его идентификатору
    createOrder(order: iOrder): Promise<ICreatedOrderResponse>; // Создать новый заказ
}
```

## Архитектура проекта
Проект "Веб-ларек" следует архитектурному паттерну MVP (Model View Presenter), который включает несколько ключевых компонентов для обеспечения модульности, переиспользуемости и легкости сопровождения.
Взаимодействия внутри приложения происходят через события. Модели инициализируют события, слушатели событий в основном коде выполняют передачу данных компонентам отображения, а также вычислениями между этой передачей, и еще они меняют значения в моделях.
 

### Основные части проекта:
### 1. Слой Model:
	Содержит интерфейсы данных для продуктов, заказов и корзины.
* __IProductItem__: Описывает атрибуты продукта.
* __IProductList__: Содержит массив продуктов.
* __IOrder__: Определяет структуру заказа.
* __ICartItem__: Представляет продукт в корзине.
* __ICart__: Управляет содержимым корзины и вычисляет итоговую стоимость.

### 2. Слой View:
	Определяет интерфейсы представлений для отображения данных и взаимодействия с пользователем.
* __IPageView__: Содержит элементы для отображения главной страницы, такие как счетчик корзины и список продуктов.
* __ICardView__: Описывает структуру отдельного продукта на карточке.
* __ICartView__: Представляет содержимое корзины.
* __IFormView__: Отвечает за валидацию форм.
* __IModalView__: Управляет модальными окнами.

### 3. Слой Presenter:
	Обеспечивает управление бизнес-логикой и взаимодействием между моделью, представлениями и API.
* __IEvents__ предоставляет механизмы для обработки событий.
* __IApiClient__ определяет интерфейс для работы с внешним API, таким как получение продуктов и создание заказов.

### Взаимодействие между частями проекта:
### Модульность:

* Компоненты представления используются для отображения данных и обработки пользовательского ввода.
* Презентеры и контроллеры управляют бизнес-логикой и взаимодействием с моделью данных и API.

### Обмен данными:

* Данные о продуктах и заказах передаются между моделью, представлениями и контроллерами через определенные интерфейсы и методы.

### Пример процесса в приложении:
* Взаимодействие с пользователем осуществляется через представления, которые обновляются при изменении данных в модели.
* Событийная модель (IEvents) используется для управления событиями и уведомлений между компонентами.

### Основные типы и интерфейсы:

* __IProductItem__, __IProductList__, __IOrder__, __ICartItem__, __ICart__: модели данных для продуктов, заказов и корзины.
* __IPageView__, __ICardView__, __ICartView__, __IFormView__, __IModalView__: __интерфейсы__ представлений для отображения информации и взаимодействия с пользователем.
* __IEvents__, __IApiClient__: интерфейсы для управления событиями и взаимодействия с внешним API.

